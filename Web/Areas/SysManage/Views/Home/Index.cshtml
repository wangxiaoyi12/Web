
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}

    <div class="row widget-row">
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">新增会员(人)</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-green fa fa-user"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今天</span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32(ViewData["addMember_dd"])" data-counter="counterup">0</span>
                    </div>
                    </p>
                    <i class="widget-thumb-icon bg-green fa fa-user"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本周</span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32(ViewData["addMember_week"])" data-counter="counterup">0</span>
                    </div>
                    </p>
                    <i class="widget-thumb-icon bg-green fa fa-user"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本月</span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32(ViewData["addMember_mm"])" data-counter="counterup">0</span>
                    </div>
                    </p>
                    <i class="widget-thumb-icon bg-green fa fa-user"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今年</span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32(ViewData["addMember_yy"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">新增收入(￥)</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今天</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_dd"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本周</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_week"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本月</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_mm"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今年</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_yy"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>

        @*<div class="col-md-2">
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">新增积分收入(￥)</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今天</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_dds"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本周</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_weeks"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本月</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_mms"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-red fa fa-rmb"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今年</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["income_yys"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
          
        </div>*@
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">新增支出(￥)</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-purple fa fa-money"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今天</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["expend_dd"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-purple fa fa-money"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本周</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["expend_week"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-purple fa fa-money"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本月</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["expend_mm"])" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-purple fa fa-money"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今年</span>
                        <span class="widget-thumb-body-stat" data-value="@(ViewData["expend_yy"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">拨比率(%)</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-blue icon-bar-chart"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今天</span>
                        <span class="widget-thumb-body-stat" data-value="@ViewData["OutIn_dd"].ToString()" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-blue icon-bar-chart"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本周</span>
                        <span class="widget-thumb-body-stat" data-value="@ViewData["OutIn_week"].ToString()" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-blue icon-bar-chart"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">本月</span>
                        <span class="widget-thumb-body-stat" data-value="@ViewData["OutIn_mm"].ToString()" data-counter="counterup">0</span>
                    </div> </p>
                    <i class="widget-thumb-icon bg-blue icon-bar-chart"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle">今年</span>
                        <span class="widget-thumb-body-stat" data-value="@ViewData["OutIn_yy"].ToString()" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">待发货订单</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-purple fa fa-user"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle"><a href="/ShopAdmin/ShopOrder/Index/2">点击发货</a></span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32(ViewData["Active_n"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">待处理留言</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-blue fa fa-male"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle"><a href="/Admin_Infos/AdminMsg/Index">点击回复</a></span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32(ViewData["Active_y"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">待处理汇款</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-red fa fa-cogs"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle"><a href="/Admin_Finance/Remit/Index">点击处理</a></span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32( ViewData["Remitcount"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">待处理提现</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-green fa fa-cogs"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-subtitle"><a href="/Admin_Finance/DrawManage/Index">点击处理</a></span>
                        <span class="widget-thumb-body-stat" data-value="@Convert.ToInt32( ViewData["Drawcount"])" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        @*<div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">零售区下单总额</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-green fa fa-cogs"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-body-stat" data-value="@ViewBag.LingShouQuZongJin" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>
        <div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">零售区下单数量</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-green fa fa-cogs"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-body-stat" data-value="@ViewBag.LingShouQuCount" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>*@
        @*<div class="col-md-2">
            <!-- BEGIN WIDGET THUMB -->
            <div class="widget-thumb widget-bg-color-white text-uppercase margin-bottom-5 bordered">
                <h4 class="widget-thumb-heading">挂卖单数</h4>
                <div class="widget-thumb-wrap">
                    <i class="widget-thumb-icon bg-green fa fa-cogs"></i>
                    <div class="widget-thumb-body">
                        <span class="widget-thumb-body-stat" data-value="@ViewBag.QiangGou" data-counter="counterup">0</span>
                    </div>
                </div>
            </div>
            <!-- END WIDGET THUMB -->
        </div>*@
    </div>
<div class="row">
    <div class="col-md-6 col-sm-6">
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-red-intense">
                    <i class="fa fa-bar-chart-o font-red-intense"></i>
                    <span class="caption-subject bold uppercase text-center">本月销售业绩趋势图</span>
                </div>
                <div class="tools">
                    @*<a href="" class="remove" data-original-title="" title=""> </a>*@
                </div>
            </div>
            <div class="portlet-body">
                <div id="PerformanceToBar" style="width: 100%;height:500px;"></div>
            </div>
        </div>
    </div>
    <div class="col-md-6 col-sm-6">
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-red-intense">
                    <i class="fa fa-globe font-red-intense"></i>
                    <span class="caption-subject bold uppercase text-center">会员分布图</span>
                </div>
                <div class="tools">
                    @*<a href="" class="remove" data-original-title="" title=""> </a>*@
                </div>
            </div>
            <div class="portlet-body">
                <div id="mapchart" style="width: 100%;height:500px;"></div>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <!--页面定制化引用-->
    @*<script src="/assets/global/plugins/counterup/jquery.waypoints.min.js" type="text/javascript"></script>
        <script src="/assets/global/plugins/counterup/jquery.counterup.min.js" type="text/javascript"></script>
        <script src="/assets/global/plugins/bootstrap-contextmenu/bootstrap-contextmenu.js" type="text/javascript"></script>
        <script src="~/assets/pages/scripts/components-context-menu.js"></script>
        <script src="~/assets/echart/echarts.min.js"></script>*@
    <script src="/assets/echart/echarts.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            PerformanceToBar();
            ProvinceReachedChart();
        });
        /*
        * 本周销售业绩趋势图
        */
        function PerformanceToBar() {

            // ReSharper disable once DuplicatingLocalDeclaration
            var PerformanceToBar = echarts.init(document.getElementById("PerformanceToBar"));
            //构建option模板
            var PerformanceToBarOption = {
                title: {
                    text: "本周业绩走势",
                    textStyle: {
                        fontSize: 15
                    },

                    sublink: ""
                },
                tooltip: {
                    trigger: "axis"
                },
                legend: {
                    top: 5,
                    data: []
                },
                grid: {
                    show: true,
                    left: "3%",
                    right: "3%",
                    bottom: "3%",
                    containLabel: true
                },
                toolbox: {
                    show: true,
                    feature: {
                        magicType: {
                            show: true, type: ["line", "bar"]
                        },
                        dataView: { show: true, readOnly: false },
                        restore: { show: true },
                        saveAsImage: { show: true }
                    }
                },
                calculable: true,
                xAxis: [
                    {
                        type: "category",
                        axisLabel: {
                            interval: "auto"
                        },
                        data: ["暂无数据"]
                    }
                ],
                yAxis: [
                    {
                        type: "value"
                    }
                ],
                series: [
                    {
                        name: "业绩",
                        type: "line",
                        smooth: true,
                        barMaxWidth: 30,
                        itemStyle: { normal: { areaStyle: { type: 'default' } } },
                        lineStyle: {
                            width: 20
                        },
                        label: {
                            normal: {
                                position: "top",
                                show: true
                            }
                        },
                        markLine: {
                            data: [
                                { type: 'average', name: '平均值' }
                            ]
                        },
                        legendHoverLink: true,
                        data: [0]
                    }
                ]
            };
            PerformanceToBar.showLoading({
                text: "数据加载中，请您耐心等待..."
            });
            //异步读取数据
            $.ajax({
                url: "/SysManage/Home/PerformanceToBar",// 跳转到 action
                type: "post",
                cache: false,
                dataType: "json",
                success: function (data) {

                    if (data != null && data["series"] != null) {
                        // ReSharper disable once ConditionIsAlwaysConst
                        if (data != null && data["series"] != null) {
                            PerformanceToBarOption.legend.data = data.legen;
                            PerformanceToBarOption.title.text = data.total;
                            PerformanceToBarOption.xAxis[0]["data"] = data.axis.Axis0;
                            PerformanceToBarOption.series[0]["data"] = data.series.Series0;
                            PerformanceToBar.setOption(PerformanceToBarOption);

                        } else {
                            PerformanceToBar.setOption(PerformanceToBarOption);
                        }

                    } else {
                        PerformanceToBar.setOption(PerformanceToBarOption);
                    }
                },
                error: function (e) {

                }, complete: function () {
                    //不管数据接口成功或异常，都终于载入提示
                    //停止动画载入提示
                    PerformanceToBar.hideLoading();
                }

            });
        }

        function ProvinceReachedChart() {
            var mapchar;
            $.ajax({
                url: "/assets/echart/china.json",
                type: "get",
                dataType: "json",
                success: function (chinaJson) {
                    echarts.registerMap("china", chinaJson);
                    mapchar = echarts.init(document.getElementById("mapchart"));
                    var option = {
                        title: {
                            text: "会员分布图",
                            textStyle: {
                                fontSize: 5
                            },
                            left: "center"
                        },
                        tooltip: {
                            trigger: "item"
                        },
                        legend: {
                            orient: "vertical",
                            left: "left",
                            data: ["会员"]
                        },
                        visualMap: {
                            min: 0,
                            max: 10000,
                            itemWidth: 10,
                            itemHeight: 50,
                            left: "left",
                            top: "bottom",
                            text: ["高", "低"],           // 文本，默认为数值文本
                            calculable: true
                        },
                        toolbox: {
                            show: true,
                            orient: "vertical",
                            left: "right",
                            top: "center",
                            feature: {
                                dataView: { readOnly: false },
                                restore: {},
                                saveAsImage: {}
                            }
                        },
                        series: [
                            {
                                name: "会员人数",
                                type: "map",
                                mapType: "china",
                                roam: false,
                                label: {
                                    normal: {
                                        show: false
                                    },
                                    emphasis: {
                                        show: true
                                    }
                                },
                                data: []
                            }
                        ]
                    };
                    mapchar.showLoading({
                        text: "数据加载中，请您耐心等待..."
                    });
                    $.ajax({
                        url: "/SysManage/Home/getMemberDistribution",// 跳转到 action
                        type: "get",
                        cache: false,
                        dataType: "json",
                        success: function (data) {
                            if (data != null) {
                                option.series[0]["data"] = data;
                                mapchar.setOption(option);

                            } else {
                                mapchar.setOption(option);
                            }
                        },
                        error: function (e) {

                        }, complete: function () {
                            //不管数据接口成功或异常，都终于载入提示
                            //停止动画载入提示
                            mapchar.hideLoading();
                        }
                    });
                },
                error: function (e) {

                }, complete: function () {
                    //不管数据接口成功或异常，都终于载入提示
                    //停止动画载入提示
                    mapchar.hideLoading();
                }
            });
        }
    </script>
}